!function(){"use strict";var t="undefined"==typeof global?self:global;if("function"!=typeof t.require){var e={},n={},r={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,o=function(t,e){for(var n,r=[],i=(a.test(e)?t+"/"+e:e).split("/"),o=0,s=i.length;o<s;o++)n=i[o],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},s=function(t){return t.split("/").slice(0,-1).join("/")},u=function(e){return function(n){var r=o(s(e),n);return t.require(r,e)}},c=function(t,e){var r=y&&y.createHot(t),i={id:t,exports:{},hot:r};return n[t]=i,e(i.exports,u(t),i),i.exports},l=function(t){return r[t]?l(r[t]):t},p=function(t,e){return l(o(s(t),e))},f=function(t,r){null==r&&(r="/");var a=l(t);if(i.call(n,a))return n[a].exports;if(i.call(e,a))return c(a,e[a]);throw new Error("Cannot find module '"+t+"' from '"+r+"'")};f.alias=function(t,e){r[e]=t};var h=/\.[^.\/]+$/,d=/\/index(\.[^\/]+)?$/,v=function(t){if(h.test(t)){var e=t.replace(h,"");i.call(r,e)&&r[e].replace(h,"")!==e+"/index"||(r[e]=t)}if(d.test(t)){var n=t.replace(d,"");i.call(r,n)||(r[n]=t)}};f.register=f.define=function(t,r){if(t&&"object"==typeof t)for(var a in t)i.call(t,a)&&f.register(a,t[a]);else e[t]=r,delete n[t],v(t)},f.list=function(){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};var y=t._hmr&&new t._hmr(p,f,e,n);f._cache=n,f.hmr=y&&y.wrap,f.brunch=!0,t.require=f}}(),function(){"undefined"==typeof window?this:window;require.register("app.coffee",function(t,e,n){var r;e("data/theme"),e("lib/utils"),r={initialize:function(){var t;return new(t=e("views/main"))({el:"body"})}},n.exports=r}),require.register("data/theme.yaml",function(t,e,n){n.exports={colors:{dark:"#002a45",highlight:"#539ed4",muted:"#e1e5e8",background:"#f5f6f7",text:"#4b4f56",stroke:"#cbd0d3",contrast:"#ff4637",pale:{contrast:"#ff9395",dark:"#8b9eae"}},font:{family:'"Source Sans Pro", sans-serif',style:{labelLeft:{"text-anchor":"start","font-size":"inherit","font-family":'"Source Sans Pro", sans-serif',fill:"#4b4f56"},labelMiddle:{"text-anchor":"middle","font-size":"inherit","font-family":'"Source Sans Pro", sans-serif',fill:"#4b4f56"},labelRight:{"text-anchor":"end","font-size":"inherit","font-family":'"Source Sans Pro", sans-serif',fill:"#4b4f56"}}}}}),require.register("lib/easie.coffee",function(t,e,n){var r,i,a,o,s,u,c,l,p,f,h,d,v,y,m,g,w,b,_,$,k,x,C,I,O,q,T,E,P,S,M,A,z,D,F;C=Math,r=function(t,e){return null==e&&(e=1.70158),t*t*((e+1)*t-e)},a=function(t,e){return null==e&&(e=1.70158),(t-=1)*t*((e+1)*t+e)+1},i=function(t,e){return null==e&&(e=1.70158),(t*=2)<1?.5*(t*t*(((e=1.525)+1)*t-e)):.5*((t=2)*t*(((e=1.525)+1)*t+e)+2)},u=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},o=function(t){return 1-u(1-t,0)},s=function(t){return t<.5?.5*o(2*t,0):.5*u(2*t-1,0)+.5},c=function(t){return-(C.sqrt(1-t*t)-1)},p=function(t){return C.sqrt(1-(t-=1)*t)},l=function(t){return(t*=2)<1?-.5*(C.sqrt(1-t*t)-1):.5*(C.sqrt(1-(t-=2)*t)+1)},f=function(t){return t*t*t},d=function(t){return(t-=1)*t*t+1},h=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},m=function(t,e,n){var r;return null==e&&(e=null),null==n&&(n=null),0===t?0:1===t?1:(null==n&&(n=.3),null==e||e<1?(e=1,r=n/4):r=n/(2*C.PI)*C.asin(1/e),e*C.pow(2,-10*t)*C.sin((t-r)*(2*C.PI)/n)+1)},v=function(t,e,n){var r;return null==e&&(e=null),null==n&&(n=null),0===t?0:1===t?1:(null==n&&(n=.3),null==e||e<C.abs(1)?(e=1,r=n/4):r=n/(2*C.PI)*C.asin(1/e),t-=1,-(e*C.pow(2,10*t))*C.sin((t-r)*(2*C.PI)/n))},y=function(t,e,n){var r;return null==e&&(e=null),null==n&&(n=null),0===t?0:2===(t*=2)?1:(null==n&&(n=.3*1.5),null==e||e<C.abs(1)?(e=1,r=n/4):r=n/(2*C.PI)*C.asin(1/e),t<1?-.5*(e*C.pow(2,10*(t=1)))*C.sin((t-r)*(2*C.PI/n)):e*C.pow(2,-10*(t=1))*C.sin((t-r)*(2*C.PI)/n)+1)},g=function(t){return 0===t?0:C.pow(2,10*(t-1))},b=function(t){return 1===t?1:-C.pow(2,-10*t)+1},w=function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*C.pow(2,10*(t-1)):.5*(-C.pow(2,-10*(t-1))+2)},k=function(t){return t},_=function(t){return Easie.linearNone(t)},x=function(t){return Easie.linearNone(t)},$=function(t){return Easie.linearNone(t)},I=function(t){return t*t},q=function(t){return-t*(t-2)},O=function(t){return(t*=2)<1?.5*t*t:-.5*((t-=1)*(t-2)-1)},T=function(t){return t*t*t*t},P=function(t){return-((t-=1)*t*t*t-1)},E=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},S=function(t){return t*t*t*t*t},A=function(t){return(t-=1)*t*t*t*t+1},M=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},z=function(t){return-C.cos(t*(C.PI/2))+1},F=function(t){return C.sin(t*(C.PI/2))},D=function(t){return-.5*(C.cos(C.PI*t)-1)},n.exports={backIn:r,backOut:a,backInOut:i,bounceOut:u,bounceIn:o,bounceInOut:s,circIn:c,circOut:p,circInOut:l,cubicIn:f,cubicOut:d,cubicInOut:h,elasticOut:m,elasticIn:v,elasticInOut:y,expoIn:g,expoOut:b,expoInOut:w,linearNone:k,linearIn:_,linearOut:x,linearInOut:$,quadIn:I,quadOut:q,quadInOut:O,quartIn:T,quartOut:P,quartInOut:E,quintIn:S,quintOut:A,quintInOut:M,sineIn:z,sineOut:F,sineInOut:D}}),require.register("lib/keycode.coffee",function(t,e,n){var r,i,a,o,s,u,c,l,p,f,h,d,v,y,m,g,w,b,_;u=8,g=9,l=13,y=16,s=17,p=27,m=32,f=37,w=38,v=39,c=40,a=91,o=93,d=33,h=34,i="A".charCodeAt(0),r="Z".charCodeAt(0),_="0".charCodeAt(0),b="9".charCodeAt(0),n.exports=function(t){var e,n;return e="",t.shiftKey&&t.keyCode!==y&&(e+="SHIFT_"),(t.metaKey||t.ctrlKey&&[s,a,o].indexOf(t.keyCode)===-1)&&(e+="META_"),n=function(){var e,n;switch(t.keyCode){case u:return"DELETE";case g:return"TAB";case l:return"ENTER";case y:return"SHIFT";case p:return"ESCAPE";case m:return"SPACE";case f:return"LEFT";case w:return"UP";case v:return"RIGHT";case c:return"DOWN";case d:return"UP";case h:return"DOWN";default:return i<=(e=t.keyCode)&&e<=r?"CHAR_"+String.fromCharCode(t.keyCode):_<=(n=t.keyCode)&&n<=b?"NUM_"+String.fromCharCode(t.keyCode):"OTHER"}}(),e+n}}),require.register("lib/prefix.coffee",function(t,e,n){var r,i,a,o,s;i=document.createElement("div").style,s={},a=function(t){var e,n,r,a,o,s,u;for(r=t.substr(0,1),e=r.toUpperCase(),u=[r,"webkit"+e,"Moz"+e,"ms"+e,"O"+e],o=0,s=u.length;o<s;o++)if(a=u[o],n=a+t.substr(1),n in i)return a.substr(0,a.length-1);return!1},r=function(t){return t.replace(/\-(\w)/gi,function(t,e){return e.toUpperCase()})},o=function(t){var e;return t=r(t),e=a(t),""===e?t:!!e&&(null!=s[t]?s[t]:s[t]=e+t.charAt(0).toUpperCase()+t.substr(1))},n.exports=o}),require.register("lib/router.coffee",function(t,e,n){var r,i,a,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("views/main"),r=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(){return this.mainView=new i({el:"body"})},e.prototype.routes={"*default":"default"},e.prototype["default"]=function(t){return null==t&&(t="index"),this.mainView.display(t),"function"==typeof window.ga?window.ga("send","pageview"):void 0},e}(Backbone.Router),n.exports=r}),require.register("lib/utils.coffee",function(t,e,n){n.exports={toPercent:function(t,e){return null==e&&(e=0),""+(100*t).toFixed(e)+"%"},toThousands:function(t,e){return null==e&&(e=0),t.toFixed(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},toDate:function(t,e,n){return t.toString().match(/^\d{4}$/)?t=""+n+" "+e+" "+t:t.match(/^[a-z]+ \d{4}$/i)&&(t=""+n+" "+t),new Date(t)}}}),require.register("views/in-viewport.coffee",function(t,e,n){var r,i,a={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.initialize=function(){return window.setTimeout(_.bind(this.setup,this),300)},e.prototype.setup=function(){var t,e=this;return t=new IntersectionObserver(function(t){return t.forEach(function(t){return t.intersectionRatio>0?e.$el.addClass("visible").trigger("enter"):e.$el.removeClass("visible").trigger("exit")})}),t.observe(this.el)},e}(Backbone.View),n.exports=r}),require.register("views/likert.coffee",function(t,e,n){var r,i,a={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.events={"mouseenter rect":"onEnter","mouseleave rect":"onExit"},e.prototype.onEnter=function(t){var e,n,r,i,a;return a=t.currentTarget.dataset,i=a.value,e=a.percent,r=a.target,this.$target=this.$(r),this["default"]=this.$target.text(),n=this.$target.text(e),this.$(t.currentTarget).addClass("rect-hover").parent().addClass("group-hover").siblings().stop().animate({opacity:.5},300),this.$target.siblings("text").stop().animate({opacity:0},300)},e.prototype.onExit=function(){return this.$target.text(this["default"]),this.$("g").stop().animate({opacity:1},300),this.$(".rect-hover, .group-hover").removeClass("rect-hover group-hover"),this.$target.siblings("text").stop().animate({opacity:1},300)},e}(Backbone.View),n.exports=r}),require.register("views/main.coffee",function(t,e,n){var r,i,a,o,s={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("app"),a=e("lib/keycode"),r=function(t){function n(){return o=n.__super__.constructor.apply(this,arguments)}return u(n,t),n.prototype.initialize=function(){var t,n,r,i,a,o,s,u,c,l,p,f=this;for(t=$(window),s={},a=window.parent!==window,this.$el.addClass("embed-"+a.toString()),a||(n=$(".wrapper"),i=n.outerHeight(),o=$("html").height(),n.css({margin:""+(o-i)/2+"px auto"})),this.$("[data-src]").each(function(t,e){var n;return n=$(e),n.attr("src",n.data("src"))}),p=["resize"],u=function(e,n){var r;return r=function(){var t;t=function(){return f.onDebouncedEvent(e),delete n[e]},n[e]?window.clearTimeout(n[e]):window.setTimeout(t(),0),n[e]=window.setTimeout(t,300)},t.on(e,r)},c=0,l=p.length;c<l;c++)r=p[c],u(r,s);return this.views=this.$("[data-view]").map(function(t,n){var r,i,a,o,s,u,c,l;for(s=$(n).data("view").split(/, */),l=[],u=0,c=s.length;u<c;u++){o=s[u];try{r=e("views/"+o),a=_.extend({el:n},$(n).data()),l.push(new r(a))}catch(p){i=p,l.push(console.error("error making view views/"+o,i))}}return l}).toArray()},n.prototype.onDebouncedEvent=function(t){var e,n,r,i,a;for(i=this.views,a=[],n=0,r=i.length;n<r;n++)e=i[n],a.push(null!=e?e.trigger(t):void 0);return a},n}(Backbone.View),n.exports=r}),require.register("views/match.coffee",function(t,e,n){var r,i,a={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.events={"mouseenter [data-id]":"onEnter","mouseleave [data-id]":"onLeave"},e.prototype.initialize=function(){return this.splitter=this.$el.data("splitter")||" ",this.$elements=this.$("[data-id]"),this.$links=this.$("[data-link]")},e.prototype.onEnter=function(t){var e,n,r=this;return t.preventDefault(),e=$(t.currentTarget),n=e.attr("data-id"),this.$links.removeClass("active inactive").addClass("inactive"),this.$("[data-link='"+n+"']").addClass("active").removeClass("inactive"),this.$elements.not(e).each(function(t,e){var i,a,o;return i=$(e),a=null!=(o=i.attr("data-list"))?o.split(r.splitter):void 0,i.toggleClass("active",_.includes(a,n)).toggleClass("inactive",!_.includes(a,n))}),this.$elements.filter(".active").each(function(t,e){return n=$(e).attr("data-id"),r.$("[data-link='"+n+"']").addClass("active").removeClass("inactive")}),e.addClass("active")},e.prototype.onLeave=function(){return this.$elements.removeClass("active inactive"),this.$links.removeClass("active inactive")},e}(Backbone.View),n.exports=r}),require.register("views/time-series.coffee",function(t,e,n){var r,i,a,o,s,u={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("lib/easie"),a=function(t,e,n){if(t>=0&&e>=0)return t+(e-t)*n},o=function(t){return Math.round(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},n.exports=r=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.data=window.chart,e.prototype.events={"click #btn-play":"play","click #btn-pause":"pause","click #btn-reset":"reset","click #btn-end":"end","click .year-link":"goToYear","click .chart-title-label":"selectKey",chartplay:"pause",chartpause:"pause",chartreset:"reset"},e.prototype.initialize=function(t){var e,n,r,i,a=this;for(t.items&&(this.data.items=this.data[t.items]),this.$elements={blocks:{},labels:{},item:this.$(".item"),year:this.$(".year"),years:this.$("#axis-years-list"),scale:this.$("#scale-strokes"),strokes:this.$(".scale-stroke"),keys:this.$(".chart-title-label")},i=this.data.keys,n=0,r=i.length;n<r;n++)e=i[n],this.$elements.blocks[e]=this.$(".item-bar-block."+e),this.$elements.labels[e]=this.$(".item-bar-label."+e);return this.selectKey(),this.$el.addClass("loading"),this.reset(),window.setTimeout(function(){return a.play(),a.$el.removeClass("loading")},600)},e.prototype.render=function(t){var e,n,r,s,u,c,l,p,f,h,d,v,y,m,g,w,b,$,k,x,C,I,O,q,T,E,P,S,M,A,z,D,F,B,N;for(I=Math.floor(t),O=Math.min(I+1,this.data.scale.length-1),v=t-I,f=function(){var t,e,n,r,i=this;for(n=this.data.keys,r=[],t=0,e=n.length;t<e;t++)u=n[t],r.push(_.chain(this.data.items).map(function(t,e){return{name:t.name,index:e,isEstimate:i.data.scale[I]>=t.after,value:a(t[u][I],t[u][O],v),stack:i.data.keys.reduce(function(e,n){return e+a(t[n][I],t[n][O],v)},0)}}).sortBy(function(t){return i.data.stack?-t.stack:null!=t.value?-t.value:1/0}).value());return r}.call(this),p=f[this.activeIndex],d=_.chain(f).flatten().pluck("value").max().value(),this.data.stack&&(d=_.max(f[0].map(function(t,e){var n,r,i,a;for(n=t.value,a=f.slice(1),r=0,i=a.length;r<i;r++)p=a[r],n+=p[e].value;return n}))),l=this.$elements.strokes.length-1,e=this.data.scaleFactor/(1/l),w=e/d,this.$elements.year.removeClass("active").eq(Math.round(t)).addClass("active"),h=!1,D=_.keys(this.data.classes).reverse(),q=0,S=D.length;q<S;q++)u=D[q],$=i.sineInOut(parseFloat(u))*(this.data.scale.length-1),x=this.data.classes[u],this.$el.toggleClass(x,!h&&t>=$),h=h||t>=$;for(this.$elements.years.css({transform:"translate3d(0, "+100*-t+"%, 0)"}),this.$elements.scale.css({transform:"scale3d("+w+", 1, 1)"}),this.$elements.strokes.css({transform:"scale3d("+1/w+", 1, 1)"}),k=[],n=T=0,M=f.length;T<M;n=++T)for(c=f[n],u=this.data.keys[n],g=E=0,A=c.length;E<A;g=++E)F=c[g],C=F.value,r=F.index,null==C&&(C=0),m=C,this.data.stack&&(null==k[g]&&(k[g]=0),m+=k[g],k[g]+=m),y=m/d,b=Math.round(C).toString().length,this.$elements.blocks[u].eq(r).css({transform:"translate3d("+(-100+100*y)+"%, 0, 0)"}),g<this.data.limit&&this.$elements.labels[u].eq(r).html(C>=0?[this.data.prefix,o(C),this.data.suffix].join(""):"No Data").css({opacity:0===n?100*y-(b+2):2*(C-_.find(f[0],{index:r}).value)/C});for(N=[],g=P=0,z=p.length;P<z;g=++P)B=p[g],C=B.value,r=B.index,s=B.isEstimate,g=Math.min(g,this.data.limit),N.push(this.$elements.item.eq(r).toggleClass("estimate",s).css({transform:"translate3d(0, "+100*Math.min(g,this.data.limit)+"%, 0)",opacity:g>=this.data.limit?0:1}));return N},e.prototype.play=function(){var t,e,n,r=this;return window.cancelAnimationFrame(this.loop),this.playing=!0,this.$el.addClass("playing"),1!==this.currentTime&&null!=this.currentTime||(this.currentTime=0),t=this.data.scale.length-1,e=Date.now()-this.currentTime*this.data.duration,(n=function(){var a,o;return a=Date.now()-e,o=a/r.data.duration,o=Math.min(o,1),"step"===r.data.timingFunction?r.render(Math.abs(o*t)):r.render(i.sineInOut(o)*t),o<1&&r.playing?(r.currentTime=o,r.loop=window.requestAnimationFrame(n)):r.playing?(r.$el.removeClass("playing"),r.currentTime=1,r.playing=!1):void 0})()},e.prototype.pause=function(){return this.playing?(this.playing=!1,this.$el.removeClass("playing")):this.play()},e.prototype.reset=function(t){return window.cancelAnimationFrame(this.loop),this.currentTime=0,this.$el.removeClass("playing"),this.render(0)},e.prototype.end=function(){var t,e=this;return t=this.data.scale.length-1,window.setTimeout(function(){return e.render(t)},this.playing?100:0),this.currentTime=1,this.playing=!1,this.$el.removeClass("playing")},e.prototype.goToYear=function(t){var e,n,r,i=this;return n=function(t){return Math.acos(-2*t+1)/Math.PI},e=this.data.scale.length-1,r=this.$(t.currentTarget).data("index")/e,this.currentTime=n(r),this.playing=!1,this.$el.removeClass("playing"),window.setTimeout(function(){return i.render(r*e)},100)},e.prototype.selectKey=function(t){if(this.activeIndex=t?this.$(t.currentTarget).index():0,this.$elements.keys.removeClass("active").eq(this.activeIndex).addClass("active"),!this.playing)return this.render(i.sineInOut(this.currentTime)*(this.data.scale.length-1))},e}(Backbone.View)}),require.register("___globals___",function(t,e,n){})}(),require("___globals___");